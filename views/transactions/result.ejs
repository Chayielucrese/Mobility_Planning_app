<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction proceeding</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/fontawesome.min.css" integrity="sha384-NvKbDTEnL+A8F/AA5Tc5kmMLSJHUO868P+lDtTpJIeQdGYaUIuLr4lVGOEA1OcMy" crossorigin="anonymous">
</head>
<body>
    <div class="container" style="height: 100vh;">
        <div class="h-100 d-flex justify-content-center align-items-center">
        
        <% if (status !== 'success') { %>
            <div class="card border-danger mb-3" style="max-width: 18rem;">
                <div class="card-b                    <h5 class="card-title">Error</h5>
ody text-danger text-center">
                       <p class="card-text">
                       You Are About to Cancel this Transaction. <b><%= message %></b>
                    </p>
                    <!-- Cancel button -->
                    <button id="cancel-btn" style="background-color: rgb(248, 75, 104); color: white; cursor: pointer; height: 50px; width: 50%; margin-left: 20px; border: none;">
                        Cancel
                    </button>
                </div>
            </div>
        <% } else { %>
            <div class="card border-success mb-3" style="max-width: 18rem;">
                <div class="card-body text-success text-center">
                    <h5 class="card-title">Success</h5>
                    <i class="fas fa-check-circle fa-3x"></i>
                    <p class="card-text">
                        Payment was successful. <b>Your balance was charged</b>
                    </p>
                </div>
            </div>
        <% } %>

        </div>
    </div>  

    <!-- JavaScript for handling the cancel action -->
    <script>
        document.getElementById('cancel-btn').addEventListener('click', function() {
            // Attempt to close the browser window
            if (window.opener) {
                window.close();
            } else {
                // If unable to close, redirect to a specific route (e.g., recharge route)
                window.location.href = "flutter://recharge"; // Replace this with your recharge route or a deep link
            }
        });
    </script>
</body>
</html>
